
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>O&#8217;Reilly Software Architecture Conference 2020 - KnowledgeShop</title>
  <meta name="author" content="Mohamed Fizal Ihsan Mohamed">


<meta name="description" content="O'Reilly Software Architecture Conference 2020 Day 1: Service Mesh training (Linkerd) Linkerd features Day 1: Building APIs with Contract Driven &hellip;">
<meta name="keywords" content="big data, data science, mongodb, nosql, R, statistics">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://fizalihsan.github.io/technology/conf_sacon2020.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <!-- Below custom CSS is for table border styling -->
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />

  <link href="" rel="alternate" title="KnowledgeShop" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
tex2jax: {
  inlineMath: [ ['$', '$'], ["\\(","\\)"] ],
  displayMath: [ ['$$', '$$'], ["\\[","\\]"] ],
  processEscapes: true,
  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
},
messageStyle: "none",
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript" /></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-58187831-1']);
    _gaq.push(['_setDomainName','github.io']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">KnowledgeShop</a></h1>
  
    <h2>Learn & Share</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:fizalihsan.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  


<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>


</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">O&#8217;Reilly Software Architecture Conference 2020</h1>
    
  </header>
  
  <ul id="markdown-toc">
  <li><a href="#day-1-service-mesh-training-linkerd" id="markdown-toc-day-1-service-mesh-training-linkerd">Day 1: Service Mesh training (Linkerd)</a>    <ul>
      <li><a href="#linkerd-features" id="markdown-toc-linkerd-features">Linkerd features</a></li>
    </ul>
  </li>
  <li><a href="#day-1-building-apis-with-contract-driven-development" id="markdown-toc-day-1-building-apis-with-contract-driven-development">Day 1: Building APIs with Contract Driven Development</a></li>
  <li><a href="#day-2--3" id="markdown-toc-day-2--3">Day 2 &amp; 3</a></li>
</ul>

<h1 id="day-1-service-mesh-training-linkerd">Day 1: Service Mesh training (Linkerd)</h1>

<ul>
  <li>Control plane and data plane (proxy side car) are separated</li>
  <li>Tenants
    <ul>
      <li>Observability</li>
      <li>Security: encryption traffic b/w services</li>
      <li>Reliability</li>
      <li>Traffic Management: routing between services</li>
    </ul>
  </li>
  <li>Service Mesh Interface Spec (???)</li>
  <li>https://github.com/cpretzer/linkerd-traffic-split</li>
</ul>

<h2 id="linkerd-features">Linkerd features</h2>

<ul>
  <li><strong>Reliability</strong>
    <ul>
      <li><strong>Automatic retries &amp; timeouts</strong>
        <ul>
          <li>for gracefully handling partial or transient application failures.</li>
          <li>Timeouts work hand in hand with retries. Once requests are retried a certain number of times, it becomes important to limit the total amount of time a client waits before giving up entirely.</li>
          <li>A <em>service profile</em> may define certain routes as retryable or specify timeouts for routes. This will cause the Linkerd proxy to perform the appropriate retries or timeouts when calling that service. Retries and timeouts are always performed on the outbound (client) side</li>
          <li><em>Retry budget</em>: Rather than specifying a fixed maximum number of retry attempts per request, Linkerd keeps track of the ratio between regular requests and retries and keeps this number below a configurable limit. For example, you may specify that you want retries to add at most 20% more requests. Linkerd will then retry as much as it can while maintaining that ratio.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Security</strong>
    <ul>
      <li><strong>mTLS</strong>
        <ul>
          <li>By default, Linkerd automatically enables mutual Transport Layer Security (mTLS) for most HTTP-based communication between meshed pods, by establishing and authenticating secure, private TLS connections between Linkerd proxies.</li>
          <li>Linkerd control plane also runs on the data plane, this means that communication between Linkerd’s control plane components are also automatically secured via mTLS.</li>
          <li>Linkerd’s control plane issues TLS certificates to proxies, which are scoped to the Kubernetes ServiceAccount of the containing pod and automatically rotated every 24 hours. The proxies use these certificates to encrypt and authenticate most HTTP traffic to other proxies.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Traffic Management</strong>
    <ul>
      <li>Proxy all connections (http, http/2, grpc) and automatically collect metrics, load balance, retries, etc.</li>
      <li>capable of proxying all TCP traffic, including TLS’d connections, WebSockets, and HTTP tunneling.</li>
      <li><strong>Ingress</strong>
        <ul>
          <li>Linkerd does not provide its own ingress controller. Instead, Linkerd is designed to work alongside your ingress controller of choice.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Observability</strong></li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">export </span><span class="nv">KUBECONFIG</span><span class="o">=</span>/Users/maryam/.kube/fizal-k8s-cluster-kubeconfig.yaml
</span><span class="line">kubectl apply -f module1/booksapp.yml
</span><span class="line">kubectl config <span class="nb">set</span>-context --current --namespace<span class="o">=</span>booksapp
</span><span class="line">kubectl get po -w
</span><span class="line">kubectl get svc -w <span class="c"># wait for the external IP to show up after the service is up and access http://&lt;ip&gt;:7000</span>
</span><span class="line">
</span><span class="line"><span class="c"># to access it via http://localhost:7000, run port forward</span>
</span><span class="line">kubectl port-forward svc/webapp 7000
</span><span class="line">
</span><span class="line"><span class="c"># install linkerd client (https://github.com/linkerd/linkerd2/releases/tag/stable-2.7.0)</span>
</span><span class="line">curl https://run.linkerd.io/install <span class="p">|</span> sh
</span><span class="line"><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/Users/maryam/.linkerd2/bin
</span><span class="line">
</span><span class="line">linkerd check --pre                     <span class="c"># validate that Linkerd can be installed</span>
</span><span class="line">linkerd install &gt; linkerd-install.yaml  <span class="c"># to save the yaml file</span>
</span><span class="line">linkerd install <span class="p">|</span> kubectl apply -f -    <span class="c"># install the control plane into the &#39;linkerd&#39; namespace</span>
</span><span class="line">linkerd check                           <span class="c"># validate everything worked!</span>
</span><span class="line">linkerd dashboard                       <span class="c"># launch the dashboard</span>
</span><span class="line">
</span><span class="line">kubectl get po -n linkerd       <span class="c"># view the linkerd pods</span>
</span><span class="line">kubectl get deploy -n linkerd   <span class="c"># view the linkerd deployments</span>
</span><span class="line">kubectl get svc -n linkerd      <span class="c"># view the linkerd services</span>
</span><span class="line">
</span><span class="line">kubectl get ns booksapp -oyaml <span class="c"># view namespace before annotation injection</span>
</span><span class="line">kubectl annotate ns booksapp linkerd.io/inject<span class="o">=</span>enabled <span class="c"># update the booksapp namespace to enable automatic proxy injection</span>
</span><span class="line">
</span><span class="line">kubectl rollout restart deploy
</span><span class="line">kbuectl
</span><span class="line">kubectl get po -w
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>
    <p>Linkerd does auto-injection based on K8s annotations</p>
  </li>
  <li>Ingress controller
    <ul>
      <li>it is like a reverse proxy for your services</li>
      <li>NGINX is used here</li>
      <li>Instead of kubeproxy based load balancing, Linkerd takes over and uses EWMA algorithm to load balance.</li>
      <li>Allows to add mTLS between ingress controller and the services. What is mTLS or mutual TLS?</li>
      <li>Monitor the golden metrics at endpoint level</li>
      <li>Linkerd control plane is also injected with linkerd proxy to collect its health metrics</li>
    </ul>
  </li>
  <li>Routes
    <ul>
      <li></li>
    </ul>
  </li>
  <li>Service profiles
    <ul>
      <li>retry if a svc call fails</li>
      <li>timeouts</li>
      <li>get notifications if P99 latency went up, for example</li>
    </ul>
  </li>
  <li>Edges: shows all the edges (graph) or connections between services</li>
  <li>
    <p>Taps: monitors the tcp traffic b/w svcs</p>
  </li>
  <li>Mac watch command?</li>
</ul>

<h1 id="day-1-building-apis-with-contract-driven-development">Day 1: Building APIs with Contract Driven Development</h1>

<ul>
  <li>https://github.com/jpgough/api-workshop</li>
  <li>
    <p>https://github.com/jpgough/api-workshop-solution</p>
  </li>
  <li>Spring Cloud Contracts spec?
    <ul>
      <li>supports Spock??</li>
    </ul>
  </li>
  <li>You can generate stubs from contracts</li>
  <li>See ATDD (Acceptance testing driven development)</li>
  <li>2 entities: producer, consumer</li>
  <li>types:
    <ul>
      <li>producer-driven contract - producer creates their own contract</li>
      <li>consumer-driven contract,</li>
    </ul>
  </li>
  <li><a href="https://pacti.io">Pact</a>
    <ul>
      <li>Pact is for testing the contract used for communication, and not for testing particular UI behaviour or business logic</li>
      <li>Contract Broker: application for sharing of contracts. Pact provides a broker.</li>
      <li>Supports GraphQL</li>
    </ul>
  </li>
  <li>Open API specification
    <ul>
      <li>only defines the shape and structure, not the behavior</li>
      <li>Why?
        <ul>
          <li>documentation</li>
          <li>generate code  (in any language)</li>
        </ul>
      </li>
      <li>XSD, CORBA, WSDL, WADL, gRPC</li>
      <li>supports GraphQL???</li>
      <li>Spring-fox - an OS project scans annotations and generates the spec</li>
      <li>Swagger
        <ul>
          <li>Swagger request validator.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>2 approaches
    <ul>
      <li>Contract driven development</li>
      <li>API Specification first
        <ul>
          <li>Create client and server code using Swagger codegen (<code>brew install swagger-codegen</code>) - https://github.com/swagger-api/swagger-codegen</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h1 id="day-2--3">Day 2 &amp; 3</h1>

<ul>
  <li>Spring cloud pipeline</li>
  <li>Blog “<a href="https://netflixtechblog.com/how-we-build-code-at-netflix-c5d9bd727f15">How we build code at Netflix</a>”</li>
  <li>Fitness functions - continually evaluating architecture effectiveness</li>
  <li>user story, Architecture story, technical debt stories</li>
  <li>value stream mapping</li>
  <li>SLI, SLO,</li>
  <li>Remove GOD objects</li>
  <li>Reduce cyclomatic complexity</li>
  <li>AWS API gateway is serverless?</li>
  <li>AWS dynamo dB is serverless?</li>
  <li>Exploring DDD conference Denver</li>
  <li>Data operators in Java?</li>
  <li>Software - must stay on top of complexity. Reduce cognitive complexity</li>
  <li>Keep intellectual testing high
    <ul>
      <li>Culture of good and simple design</li>
      <li>Property based testing</li>
      <li>Model based testing</li>
    </ul>
  </li>
  <li>Micro service - shared dB- number of connections can exponentially grow and cause latency and connection timeouts</li>
  <li>Service locator vs. service discovery</li>
  <li>Why microservices
    <ul>
      <li>Agility</li>
      <li>Testabilty</li>
      <li>Deployability</li>
      <li>Scalability</li>
      <li>Fault tolerance</li>
      <li>Maintainability</li>
    </ul>
  </li>
  <li>Kustomize or Openshift template</li>
  <li>K8s operator</li>
  <li>Microservices DDD
    <ul>
      <li>Decomposition strategies
        <ul>
          <li>Bounded contexts</li>
          <li>Subdomains</li>
          <li>Business entities and processes</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


  
</article>

</div>

<aside class="sidebar">
  
    <section>

	<br/><br/>
	<ul>
		<h2>Technical</h2>

		<li>
			<h3>Architecture</h3>
			<a href="/technology/architecture.html">Overview</a>  |  
			<a href="/technology/coding-principles.html">Coding Principles</a> |	
			<a href="/technology/ddd.html">DDD</a>  |  
			<a href="/technology/design-principles.html">Design Principles</a>  |
			<a href="/technology/eventsourcing.html">Event Sourcing</a> |  
			<a href="/technology/lambda-architecture.html">Lambda Architecture</a>  |  
			<a href="/technology/observability.html">Observability</a>  |  
			<a href="/technology/operations.html">Operations</a> |
			<a href="/technology/patterns.html">Patterns</a>|  
			<a href="/technology/sdlc.html">SDLC</a> |  
			<a href="/technology/scalability.html">Scalability</a>  |  
			<a href="/technology/security.html">Security</a>  |  
			<a href="/technology/transaction.html">Transactions</a>
		</li>

		<li>
			<h3>BigData</h3>
			<a href="/technology/bigdata.html">Concepts</a>  |  
			<a href="/technology/distributedcomputing.html">Distributed Computing</a>  |  
			<a href="/technology/elasticsearch.html">ElasticSearch</a>  |  
			<a href="/technology/bigdata-frameworks.html">Frameworks</a>  |  
			<a href="/technology/hadoop-ecosystem.html">Hadoop Ecosystem</a>  | 
			<a href="/technology/knowledgegraph.html">Knowledge Graph</a> |
			<a href="/technology/nosql.html">NoSQL</a>  |  
			<a href="/technology/concurrency-parallelism.html">Parallel Computing</a>
		</li>

		<li>
			<h3>Cloud Computing</h3>
			<a href="/technology/cloud-computing.html">Concepts</a>  |  
			<a href="/technology/aws.html">AWS</a>  |  
			<a href="/technology/infrastructure-as-code.html">Infrastructure as Code</a>  |  
			<a href="/technology/virtualization.html">Virtualization</a>
		</li>

		<li>
			<h3>Database</h3>
			<a href="/technology/rdbms.html">Concepts</a>  |  
			<a href="/technology/db-design.html">Design</a>  |  
			<a href="/technology/db-performance.html">Performance</a>  |  
			<a href="/technology/sql.html">SQL</a>
		</li>

		<li>
			<h3>Functional Programming</h3>
			<a href="/technology/functionalprogramming.html">Concepts</a>
		</li>

		<li>
			<h3>Java</h3>
			<a href="/technology/java.html">Core Concepts</a>  |  
			<a href="/technology/java-collections.html">Collections</a>  |  
			<a href="/technology/java-concurrency.html">Concurrency</a>  |  
			<a href="/technology/java-database.html">Database</a>  |  
			<a href="/technology/java-jmx.html">JMX</a>  |  
			<a href="/technology/java-jndi.html">JNDI</a>  |  
			<a href="/technology/java-io.html">I/O</a>  |  
			<a href="/technology/java-performance.html">Performance</a>  |  
			<a href="/technology/java-testing.html">Testing</a>  |  
			<a href="/technology/java-web.html">Web</a>  |  
			<a href="/technology/java-newsletters.html">Java Specialist Newsletters</a>
		</li>

		<li>
			<h3>Languages</h3>
			<a href="/technology/groovy.html">Groovy</a>  |  
			<a href="/technology/python.html">Python</a>  |  
			<a href="/technology/scala.html">Scala</a>
		</li>

		<li>
			<h3>Integration</h3>
			<a href="/technology/soa.html">Concepts</a>  |  
			<a href="/technology/bff.html">BFF</a> |
			<a href="/technology/camel.html">Camel</a>  |  
			<a href="/technology/graphql.html">GraphQL</a>  |  
			<a href="/technology/messaging.html">Messaging</a> |  
			<a href="/technology/microservices.html">Microservices</a>   |  
			<a href="/technology/rest-services.html">REST</a>  | 
			<a href="/technology/servicemesh.html">Service Mesh</a> |
			<a href="/technology/soap-services.html">SOAP</a>  |  
			
			<a href="/technology/webservices.html">Web Services</a> |  
			<a href="/technology/xml.html">XML</a>
		</li>

		<li>
			<h3>Spring</h3>
			<a href="/technology/spring-batch.html">Batch</a>  |  
			<a href="/technology/spring.html">Core</a>  |  
			<a href="/technology/spring-mvc.html">MVC</a> |
			<a href="/technology/spring-security.html">Security</a>
		</li>

		<li>
			<h3>Web</h3>
			<a href="/technology/webconcepts.html">Concepts</a> |
			<a href="/technology/webanalytics.html">Analytics</a> |
			<a href="/technology/angular.html">Angular</a> | 
			<a href="/technology/webapp_architecture.html">Architecture</a> | 
			<a href="/technology/js-ecosystem.html">JS Ecosystem</a> |
			<a href="/technology/microfrontend.html">Micro-Frontend</a> |
			<a href="/technology/web_security.html">Security</a> |
			<a href="/technology/ux.html">UX</a>
		</li>

		<li>
			<h3>General Concepts</h3>
			<a href="/technology/algorithms.html">Algorithms</a>  |  
			<a href="/softskills/brain-teasers.html">Brain Teasers</a>  |  
			<a href="/technology/datastructures.html">Data Structures</a>  |  
			<a href="/technology/design-faqs.html">Design FAQs</a>  |  
			<a href="/technology/networking.html">Networking</a>  |  
			<a href="/technology/oops.html">OOPS</a>  |  
			<a href="/technology/os.html">Operating Systems</a>  |  
			<a href="/technology/vcs.html">VCS</a>
		</li>

		<h2>Non-Techninal</h2>
		<li>
			<a href="/misc/okr.html">OKR</a>
		</li>
		<li>
			<h3>Domain Knowledge</h3>
			<a href="/domain/retirement.html">Retirement</a>
		</li>

		<li>
			<h3>Soft Skills</h3>
			<a href="/softskills/presentation.html">Presentation</a>  |  
			<a href="/softskills/productivity.html">Productivity</a>  |  
			<a href="/softskills/written.html">Written Communication</a>
		</li>
	</ul>

  <!-- <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
  </ul> &#8211;>
  <!-- <ul>
    <li><a href="/datascience/statistics.html">Statistics</a></li>
    <li><a href="/datascience/r.html">R Programming</a></li>
  </ul> &#8211;>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/fizalihsan">@fizalihsan</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'fizalihsan',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2021 - Mohamed Fizal Ihsan Mohamed -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
