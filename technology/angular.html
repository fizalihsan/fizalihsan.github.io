
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Angular - KnowledgeShop</title>
  <meta name="author" content="Mohamed Fizal Ihsan Mohamed">


<meta name="description" content="Angular Project Structure Files Structure Concepts Binding Components Component Attributes Component Input &amp; Output View and Content Projection &hellip;">
<meta name="keywords" content="big data, data science, mongodb, nosql, R, statistics">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://fizalihsan.github.io/technology/angular.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <!-- Below custom CSS is for table border styling -->
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />

  <link href="" rel="alternate" title="KnowledgeShop" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
tex2jax: {
  inlineMath: [ ['$', '$'], ["\\(","\\)"] ],
  displayMath: [ ['$$', '$$'], ["\\[","\\]"] ],
  processEscapes: true,
  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
},
messageStyle: "none",
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript" /></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-58187831-1']);
    _gaq.push(['_setDomainName','github.io']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">KnowledgeShop</a></h1>
  
    <h2>Learn & Share</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:fizalihsan.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  


<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>


</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Angular</h1>
    
  </header>
  
  <ul id="markdown-toc">
  <li><a href="#project-structure" id="markdown-toc-project-structure">Project Structure</a>    <ul>
      <li><a href="#files" id="markdown-toc-files">Files</a></li>
      <li><a href="#structure" id="markdown-toc-structure">Structure</a></li>
    </ul>
  </li>
  <li><a href="#concepts" id="markdown-toc-concepts">Concepts</a>    <ul>
      <li><a href="#binding" id="markdown-toc-binding">Binding</a></li>
      <li><a href="#components" id="markdown-toc-components">Components</a>        <ul>
          <li><a href="#component-attributes" id="markdown-toc-component-attributes">Component Attributes</a></li>
          <li><a href="#component-input--output" id="markdown-toc-component-input--output">Component Input &amp; Output</a></li>
          <li><a href="#view-and-content-projection" id="markdown-toc-view-and-content-projection">View and Content Projection</a></li>
          <li><a href="#component-lifecycle" id="markdown-toc-component-lifecycle">Component Lifecycle</a></li>
        </ul>
      </li>
      <li><a href="#directives" id="markdown-toc-directives">Directives</a></li>
      <li><a href="#forms---template-driven" id="markdown-toc-forms---template-driven">Forms - Template-driven</a>        <ul>
          <li><a href="#type-1-value-and-event-binding" id="markdown-toc-type-1-value-and-event-binding">Type 1: Value and Event Binding</a></li>
          <li><a href="#type-2-ngmodel-directive-expanded-form" id="markdown-toc-type-2-ngmodel-directive-expanded-form">Type 2: ngModel directive (expanded form)</a></li>
          <li><a href="#type-3-ngmodel-directive-simpler-form" id="markdown-toc-type-3-ngmodel-directive-simpler-form">Type 3: ngModel directive (simpler form)</a></li>
          <li><a href="#form-group" id="markdown-toc-form-group">Form group</a></li>
          <li><a href="#form-validations" id="markdown-toc-form-validations">Form Validations</a></li>
        </ul>
      </li>
      <li><a href="#forms---reactive" id="markdown-toc-forms---reactive">Forms - Reactive</a>        <ul>
          <li><a href="#form-controls" id="markdown-toc-form-controls">Form Controls</a></li>
          <li><a href="#form-groups" id="markdown-toc-form-groups">Form Groups</a></li>
          <li><a href="#form-builders" id="markdown-toc-form-builders">Form Builders</a></li>
          <li><a href="#form-data" id="markdown-toc-form-data">Form Data</a></li>
          <li><a href="#form-arrays" id="markdown-toc-form-arrays">Form Arrays</a></li>
        </ul>
      </li>
      <li><a href="#services" id="markdown-toc-services">Services</a></li>
      <li><a href="#observables" id="markdown-toc-observables">Observables</a></li>
    </ul>
  </li>
  <li><a href="#tools" id="markdown-toc-tools">Tools</a></li>
  <li><a href="#questions" id="markdown-toc-questions">Questions</a></li>
  <li><a href="#references" id="markdown-toc-references">References</a></li>
</ul>

<ul>
  <li><a href="https://angular.io/docs">Angular Docs</a></li>
</ul>

<h1 id="project-structure">Project Structure</h1>

<h2 id="files">Files</h2>

<ul>
  <li><code>main.js</code> - transpiled code that is specific to your application</li>
  <li><code>vendor.js</code> - includes all the third-party libraries and frameworks you depend on (including Angular)</li>
  <li><code>styles.js</code> - compilation of all the CSS styles that are needed for your application</li>
  <li><code>polyfills.js</code> - includes all the polyfills needed for supporting some capabilities in older browsers (like advanced ECMAScript features not yet available in all browsers)</li>
  <li><code>runtime.js</code> - includes webpack utilities and loaders that is needed for bootstrapping the application.</li>
</ul>

<h2 id="structure">Structure</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
</pre></td><td class="code"><pre><code class=""><span class="line">.
</span><span class="line">├── angular.json                     &lt;-- Angular CLI config
</span><span class="line">├── browserslist                     &lt;-- 
</span><span class="line">├── e2e                              &lt;-- End-to-end test root directory
</span><span class="line">│   ├── protractor.conf.js           &lt;-- 
</span><span class="line">│   ├── src
</span><span class="line">│   │   ├── app.e2e-spec.ts          &lt;-- 
</span><span class="line">│   │   └── app.po.ts                &lt;-- 
</span><span class="line">│   └── tsconfig.json                &lt;-- 
</span><span class="line">├── karma.conf.js                    &lt;-- 
</span><span class="line">├── package-lock.json                &lt;-- NPM dependencies lock file
</span><span class="line">├── package.json                     &lt;-- NPM dependencies
</span><span class="line">├── src
</span><span class="line">│   ├── app                          &lt;-- A component directory
</span><span class="line">│   │   ├── app.component.css        &lt;-- 
</span><span class="line">│   │   ├── app.component.html       &lt;-- 
</span><span class="line">│   │   ├── app.component.spec.ts    &lt;-- 
</span><span class="line">│   │   ├── app.component.ts         &lt;-- Root component
</span><span class="line">│   │   └── app.module.ts            &lt;-- Main module. Application specific code starts from here
</span><span class="line">│   ├── assets 
</span><span class="line">│   ├── environments                 &lt;-- 
</span><span class="line">│   │   ├── environment.prod.ts
</span><span class="line">│   │   └── environment.ts
</span><span class="line">│   ├── favicon.ico
</span><span class="line">│   ├── index.html                   &lt;-- Root HTML
</span><span class="line">│   ├── main.ts                      &lt;-- Entrypoint: identifies which Angular module to be loaded when the app starts. Main objective of this file is to point the Angular framework at the core module of your application.
</span><span class="line">│   ├── polyfills.ts                 &lt;-- 
</span><span class="line">│   ├── styles.css                   &lt;-- 
</span><span class="line">│   └── test.ts                      &lt;-- 
</span><span class="line">├── tsconfig.app.json                &lt;-- 
</span><span class="line">├── tsconfig.json                    &lt;-- 
</span><span class="line">├── tsconfig.spec.json               &lt;-- 
</span><span class="line">└── tslint.json                      &lt;-- </span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img src="/technology/angular_file_deps.svg" title="File Dependencies!" /></p>

<h1 id="concepts">Concepts</h1>

<h2 id="binding">Binding</h2>

<ul>
  <li>Data binding
    <ul>
      <li><code>&lt;div class="name"&gt;Hello  {{name}}  &lt;/div&gt;</code>. This is called <em>Interpolation</em>.</li>
    </ul>
  </li>
  <li>Property binding
    <ul>
      <li><code>&lt;div class="price" [class]="positiveChange ? 'plus' : 'minus'"&gt;$ {{price}}&lt;/div&gt;</code></li>
      <li>Tells Angular to bind to the <strong>class</strong> property of the DOM element to the value of the expression.</li>
      <li>Square-bracket notation refers to data flowing from the component to the UI.</li>
      <li>When you bind to the class property, it overrides the existing value of the property. In the example above, <code>class="price"</code> has no effect.</li>
      <li>Angular data binding only works with DOM properties, and not with HTML attributes. (see section below)</li>
    </ul>
  </li>
  <li>Event binding
    <ul>
      <li><code>&lt;button (click)="toggleFavorite()" [disabled]="favorite"&gt;Add to Favorite&lt;/button&gt;</code></li>
      <li>The parentheses notation refers to events.</li>
      <li>Angular gives you access to the underlying DOM event by giving access to a special variable <code>$event</code>. You can access it or even pass it to your function as follows: <code>&lt;button (click)="toggleFavorite($event)" [disabled]="favorite"&gt;Add to Favorite&lt;/button&gt;</code></li>
    </ul>
  </li>
</ul>

<p><em>HTML attribute vs. DOM property: What’s the difference?</em></p>

<ul>
  <li>In Angular, one-way binding binds to the DOM property, and not to the HTML attributes.</li>
  <li>Attributes are defined by HTML, while properties are defined by the DOM. Though some attributes (like <code>ID</code> and <code>class</code>) directly map to DOM properties, others may exist on one side but not the other.</li>
  <li>The distinction between the two is that HTML attributes are generally used for initialization of a DOM element, but after that, they have no purpose or effect on the underlying element. Once the element is initialized, its behavior is controlled by the DOM properties from then on.</li>
  <li>For example, consider the input HTML element. If we bootstrap our HTML with something like: <code>&lt;input type="text" value="foo"/&gt;</code> this initializes an input DOM element, with the initial value of the DOM property value to be set to foo. Now let’s assume we type something in the text box, say bar. At this point:
    <ul>
      <li>If we do input.getAttribute(‘value’), it would return foo, which was the attribute value we used to initialize the HTML.</li>
      <li>If we do input.value, we will get the current value of the DOM property, which is bar.</li>
    </ul>
  </li>
  <li>That is, the attribute value is used to boostrap and set the initial value of the HTML DOM element, but after that, it is the DOM property that drives the behavior. If you inspect the HTML, you will see that it is still the initial HTML we provided, and does not update either.</li>
</ul>

<h2 id="components">Components</h2>

<ul>
  <li>A component in Angular is nothing but a TypeScript class, decorated with some attributes and metadata. The class encapsulates all the data and functionality of the component, while the decorator specifies how it translates into the HTML.</li>
  <li>Components in Angular are our presentation layer, and should be involved in and focus on the presentation aspects of data.</li>
  <li>Components are responsible for deciding what data to display and how to render and display it in the UI. We bind the data from the components to UI and bind events from the UI to methods in the components to allow and handle user interactions.</li>
</ul>

<p>To some extent, you can consider an Angular application to be nothing but a tree of components</p>

<ul>
  <li>At its very simplest, a component is nothing but
    <ul>
      <li>a <em>class</em> that encapsulates behavior (what data to load, what data to render, and how to respond to user interactions)</li>
      <li>and a <em>template</em> (how the data is rendered).</li>
    </ul>
  </li>
  <li>2 responsibilities of a component:
    <ul>
      <li>Load and hold all the data necessary for rendering the component</li>
      <li>Handle and process any events that may arise from any element in the component</li>
    </ul>
  </li>
  <li>A component is defined using the Typescript annotation <code>@Component</code></li>
  <li>Any component needs the below 2 attributes - others are optional
    <ul>
      <li>a <em>selector</em> (to tell Angular how to find instances of the component being used)</li>
      <li>and a <em>template</em> (that Angular has to render when it finds the element).</li>
    </ul>
  </li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>app.component.ts (Root Component)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span class="line">  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-root&#39;</span><span class="p">,</span> <span class="c1">// DOM selector that gets translated into an instance of this component</span>
</span><span class="line">  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./app.component.html&#39;</span><span class="p">,</span> <span class="c1">// The HTML template backing this component - in this case, the URL to it</span>
</span><span class="line">  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./app.component.css&#39;</span><span class="p">]</span> <span class="c1">// Any component-specific styling</span>
</span><span class="line"><span class="p">})</span>
</span><span class="line">
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppComponent</span> <span class="p">{</span> <span class="c1">// The component class with its own members and functions</span>
</span><span class="line">  <span class="nx">title</span> <span class="o">=</span> <span class="s1">&#39;stock-market&#39;</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>In the example below, we have defined that the <code>StockItemComponent</code> is to be rendered whenever Angular encounters the <code>app-stock-item</code> selector, and to render the <code>stock-item.component.html</code> file when it encounters the element.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>stock-item.component.ts</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="js"><span class="line"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span class="line">  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-stock-item&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./stock-item.component.html&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./stock-item.component.css&#39;</span><span class="p">]</span>
</span><span class="line"><span class="p">})</span>
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">StockItemComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
</span><span class="line">   <span class="c1">// Code omitted here for clarity</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>Every component has to be part of a module. If you create a new component, and do not add it to a module, Angular will complain that you have components that are not part of any modules.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>app.module.ts</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="js"><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">AppComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./app.component&#39;</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">StockItemComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./component/stock-item/stock-item.component&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
</span><span class="line">  <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span> <span class="c1">// ensures that components and directives are available to use within the scope of the module.</span>
</span><span class="line">    <span class="nx">AppComponent</span><span class="p">,</span>
</span><span class="line">    <span class="nx">StockItemComponent</span>
</span><span class="line">  <span class="p">],</span>
</span><span class="line">  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span> <span class="c1">// specify modules that you want imported and accessible within your module. </span>
</span><span class="line">    <span class="nx">BrowserModule</span>
</span><span class="line">  <span class="p">],</span>
</span><span class="line">  <span class="nx">providers</span><span class="o">:</span> <span class="p">[],</span>
</span><span class="line">  <span class="nx">bootstrap</span><span class="o">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
</span><span class="line"><span class="p">})</span>
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="component-attributes">Component Attributes</h3>

<ul>
  <li>Selector
    <ul>
      <li>Few ways you could specify the <em>selector</em> attribute and how you would use it in the HTML:
        <ul>
          <li><code>selector: 'app-stock-item'</code> would result in the component being used as <code>&lt;app-stock-item&gt;&lt;/app-stock-item&gt;</code> in the HTML.</li>
          <li><code>selector: '.app-stock-item'</code> would result in the component being used as a CSS class like <code>&lt;div class="app-stock-item"&gt;&lt;/div&gt;</code> in the HTML.</li>
          <li><code>selector: '[app-stock-item]'</code> would result in the component being used as an attribute on an existing element like <code>&lt;div app-stock-item&gt;&lt;/div&gt;</code> in the HTML.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Template
    <ul>
      <li><code>templateUrl</code> is relative to the path of the component. Using absolute urls will break the build.</li>
      <li>Angular precompiles a build and ensures that the template is inlined as part of the build process.</li>
    </ul>
  </li>
  <li>Style
    <ul>
      <li>A component can have multiple styles attached to it.</li>
      <li>One thing that Angular promotes out of the box is complete encapsulation and isolation of styles. That means by default, the styles you define and use in one component will not affect/impact any other parent or child component. This ensures that you can be confident that the CSS classes you define in any component will not unknowingly affect anything else, unless you explicitly pull in the necessary styles.</li>
      <li>Angular will not pull in these styles at runtime, but rather precompile and create a bundle with the necessary styles.</li>
    </ul>
  </li>
</ul>

<h3 id="component-input--output">Component Input &amp; Output</h3>

<ul>
  <li>A component is truly useful when it is reusable. One of the ways we can make a component reusable (rather than having default, hardcoded values inside it) is by passing in different inputs depending on the use case. Similarly, there might be cases where we want hooks from a component when a certain activity happens within its context.</li>
  <li>Input
    <ul>
      <li><code>@Input</code> decorator on a member variable automatically allows you to pass in values to the component for that particular input via Angular’s data binding syntax.</li>
      <li>These inputs are data bound, so if you end up changing the value of the object in AppComponent, it will automatically be reflected in the child StockItemComponent.</li>
    </ul>
  </li>
  <li>Output
    <ul>
      <li><code>@Output</code> decorator allows to register and listen to events emitted by a component.</li>
      <li>We just added an event binding using Angular’s event-binding syntax to the output declared in the stock-item component.</li>
    </ul>
  </li>
  <li>Both <code>@Input</code> and <code>@Output</code> are class member variable level decorators.</li>
</ul>

<p><img src="/technology/component_input_output.png" title="Component Input Output!" /></p>

<h3 id="view-and-content-projection">View and Content Projection</h3>

<p>TBD</p>

<h3 id="component-lifecycle">Component Lifecycle</h3>

<p>TBD</p>

<h2 id="directives">Directives</h2>

<ul>
  <li>A <strong>directive</strong> in Angular allows you to attach some custom functionality to elements in your HTML.</li>
  <li>A directive allow us to change the behavior of an existing element or to change the structure of the template being rendered.</li>
  <li>Angular only has directives. A <strong>component</strong> is a direcive that provides both functionality and UI logic.</li>
  <li>Types
    <ul>
      <li>Component directive</li>
      <li>Non-component directive (work on and modify existing elements)
        <ul>
          <li>Attribute directive
            <ul>
              <li>Attribute directives change the look and feel, or the behavior, of an existing element or component that it is applied on. e.g, <code>ngClass</code>, <code>ngStyle</code></li>
            </ul>
          </li>
          <li>Structural directive
            <ul>
              <li>Structural directives change the DOM layout by adding or removing elements from the view. e.g., <code>ngIf</code>, <code>ngFor</code></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Attribute directives</strong>
    <ul>
      <li>Definition</li>
      <li><em>NgClass</em>
        <ul>
          <li>The NgClass directive allows us to apply or remove multiple CSS classes simultaneously from an element in our HTML. For instance, when we have to apply multiple CSS classes to an element like <code>&lt;div class="price positive large-change"&gt;</code></li>
          <li>NgClass directive takes a JavaScript object as input. For each key in the object that has a truthy value, Angular will add that key (the key itself, not the value of the key!) as a class to the element. Similarly, each key in the object that has a falsy value will be removed as a class from that element.</li>
        </ul>
      </li>
      <li><em>NgStyle</em>
        <ul>
          <li>The NgStyle directive is the lower-level equivalent of the NgClass directive. It operates in a manner similar to the NgClass in that it takes a JSON object and applies it based on the values of the keys. But the NgStyle directive works at a CSS style/properties level. The keys and values it expects are CSS properties and attributes rather than class names.</li>
        </ul>
      </li>
      <li><em>NgSwitch</em>
        <ul>
          <li>is an attribute directive</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Structural directives</strong>
    <ul>
      <li>Definition
        <ul>
          <li>are responsible for changing the layout of the HTML by adding, removing, or modifying elements from the DOM.</li>
          <li>structural directives are applied on a pre-existing element, and the directive then operates on the content of that element.</li>
          <li>All structural directives in Angular start with an asterisk (*)</li>
        </ul>
      </li>
      <li><em>*ngIf</em>
        <ul>
          <li><code>&lt;div *ngIf="stock.favorite"&gt;&lt;/div&gt;</code></li>
          <li>this directive allows you to conditionally hide or show elements in your UI. Technically, ngIf removes the element from the rendered DOM.</li>
          <li><em>Why does *ngIf remove the element, instead of hiding it via CSS?</em>
            <ul>
              <li>The reason comes down to performance and the implications thereof. Angular continues to listen and watch for events on all elements in the DOM. Removing the element from the DOM is a good way to ensure that it reduces any impact on performance, especially when the element being removed is a resource-intensive component (think a graph, or an autoupdating widget). This does mean that it is slightly less efficient when the condition toggles (since it involves a DOM addition/removal), but in the grand context of things, it is more efficient.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><em>*ngFor</em>
        <ul>
          <li><code>*ngFor - trackBy</code>
            <ul>
              <li>Angular recognizes each element in an array based on their object references, by default.</li>
              <li>There are cases when the element reference might change, but you still want to continue using the same element. For example, when you fetch new data from the server, you don’t want to blow away your list and re-create it unless the data has fundamentally changed. This is where the <code>trackBy</code> capability of the NgFor directive comes into play.</li>
              <li>Example: <code>&lt;div class="stock-container" *ngFor="let stock of stocks; index as i; trackBy: trackStockByCode"&gt;</code></li>
              <li><code>trackStockByCode</code> function implementation: <code>trackStockByCode(index, stock) { return stock.code; }</code></li>
              <li>This will ensure that Angular calls this function to figure out how to identify individual items, instead of using the object reference.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Angular does not allow to have more than one directive on the same element. e.g., <code>&lt;div *ngFor="let stock of stocks" *ngIf="stock.active"&gt;</code> is invalid.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Truthy and Falsy in JavaScript</strong>
Falsy: <code>undefined</code>, <code>null</code>, <code>NaN</code>,<code>0</code>, <code>""</code> (any empty string), <code>false</code> (the boolean value)
Truthy: Any nonzero number, Any nonempty string, Any nonnull object or array, <code>true</code> (the boolean value)</p>
</blockquote>

<h2 id="forms---template-driven">Forms - Template-driven</h2>

<p>There are 2 primary mechanisms to create forms: Template-driven forms and Reactive forms.</p>

<p>Both are part of the core <code>@angular/forms</code> library, but are part of two different modules, <code>FormsModule</code> and <code>ReactiveFormsModule</code></p>

<p>Template-driven forms allow you to drive the logic of your application via your template. The <code>FormsModule</code> adds the capability of using <code>ngModel</code>, which allows for two-way data binding in Angular.</p>

<h3 id="type-1-value-and-event-binding">Type 1: Value and Event Binding</h3>

<ul>
  <li><em>UI –&gt; Component binding</em>: The <code>value</code> binding is telling Angular to update the value property of the <code>input</code> element using the <code>stock.name</code> field in the component class. If and when it changes, Angular will be responsible for updating the property as well.</li>
  <li><em>Component –&gt; UI binding</em>: The <code>input</code> event binding is instructing Angular to update the <code>value</code> of <code>stock.name</code> with the value from the event. The <code>$event</code> in this case is the underlying DOM <code>InputEvent</code>, through which we access the target and from it, the changed value.</li>
  <li>Button on click resets the value of <code>stock.name</code> to <code>'test'</code>.</li>
  <li>Cons
    <ul>
      <li>It is hard to remember exactly which property is used by each form field, and what are the various events and where the values would be available.</li>
    </ul>
  </li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form using value and event binding</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span>
</span><span class="line">             <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span>
</span><span class="line">             <span class="err">[</span><span class="na">value</span><span class="err">]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name</span><span class="err">&quot;</span>
</span><span class="line">             <span class="err">(</span><span class="na">input</span><span class="err">)=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name=</span><span class="s">$event.target.value&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line">  <span class="nt">&lt;button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name=</span><span class="s">&#39;test&#39;</span><span class="err">&quot;</span><span class="nt">&gt;</span>Reset stock name<span class="nt">&lt;/button&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="type-2-ngmodel-directive-expanded-form">Type 2: ngModel directive (expanded form)</h3>

<ul>
  <li>The <code>ngModel</code> directive and its special syntax abstracts away the internals of each and every input type from developers, making it easier to quickly develop form-based applications.</li>
  <li>Added a <code>name</code> field to the input form element. This is necessary for the <code>ngModel</code> directive to work. If you remove this, you will see errors in the console.</li>
  <li>We added two bindings. The first one is <code>ngModel</code> data binding. This does the work of the value binding we had previously, but abstracting out which property underneath needs to be bound. It points to the component member variable that it takes the value from.</li>
  <li>The second binding we added is the <code>ngModelChange</code> event binding. In this, we update the underlying component member variable (<code>stock.name</code>) with the value of the <code>$event</code>, which is the changed value of the text field.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form using ngModel binding</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span>
</span><span class="line">             <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span>
</span><span class="line">             <span class="na">name=</span><span class="s">&quot;stockName&quot;</span>
</span><span class="line">             <span class="err">[</span><span class="na">ngModel</span><span class="err">]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name</span><span class="err">&quot;</span>
</span><span class="line">             <span class="err">(</span><span class="na">ngModelChange</span><span class="err">)=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name=</span><span class="s">$event&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line">  <span class="nt">&lt;button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name=</span><span class="s">&#39;test&#39;</span><span class="err">&quot;</span><span class="nt">&gt;</span>Reset stock name<span class="nt">&lt;/button&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="type-3-ngmodel-directive-simpler-form">Type 3: ngModel directive (simpler form)</h3>

<ul>
  <li><code>[(ngModel)]</code> banana-in-a-box syntax, as it is called. ( <code>()</code> looks like 2 bananas.)</li>
  <li>Cons
    <ul>
      <li>The combined <code>ngModel</code> syntax only has the capability to set the data-bound property. If you need to do something more complicated (say convert the text into upper-case before setting the model variable), or set it in a different field itself (a calculated value maybe?), or do multiple things, then you might want to consider the expanded syntax.</li>
    </ul>
  </li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form using ngModel simpler version</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span>
</span><span class="line">             <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span>
</span><span class="line">             <span class="na">name=</span><span class="s">&quot;stockName&quot;</span>
</span><span class="line">             <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line">  <span class="nt">&lt;button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name=</span><span class="s">&#39;test&#39;</span><span class="err">&quot;</span><span class="nt">&gt;</span>Reset stock name<span class="nt">&lt;/button&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="form-group">Form group</h3>

<ul>
  <li>We have removed the <em>banana-in-a-box</em> syntax from all the <code>ngModel</code> bindings, and just kept it as an attribute. When we use <code>ngModel</code> like this, Angular uses the name field on the form element as the model name and creates a model object corresponding to it on the form.</li>
  <li>We have surrounded the form fields with another <code>div</code>, and used an Angular directive called <code>ngModelGroup</code> on it, providing it a name (<code>stock</code> in this case). This groups the form elements, thus creating the <code>name</code>, <code>price</code>, <code>code</code>, and <code>exchange</code> fields as models under the common name <code>stock</code>. This is visible in the component when we access this entire set of values through <code>form.value.stock</code>.</li>
  <li>We can similarly create multiple form groups and use <code>ngModel</code> directly, and then finally copy over the entire values to a common field (or not copy it over at all) in our component on form submit. This is another way we can use <code>ngModel</code> and template-driven forms in our applications.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form group example</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">createStock</span><span class="err">(</span><span class="na">stockForm</span><span class="err">)&quot;</span> <span class="err">#</span><span class="na">stockForm=</span><span class="s">&quot;ngForm&quot;</span> <span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">ngModelGroup=</span><span class="s">&quot;stock&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span> <span class="na">required</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">ngModel</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-code&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Code&quot;</span> <span class="na">required</span> <span class="na">minlength=</span><span class="s">&quot;2&quot;</span> <span class="na">name=</span><span class="s">&quot;code&quot;</span> <span class="na">ngModel</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-price&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Price&quot;</span> <span class="na">name=</span><span class="s">&quot;price&quot;</span> <span class="na">required</span> <span class="na">ngModel</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-exchange&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;div&gt;</span>
</span><span class="line">          <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">&quot;exchange&quot;</span> <span class="na">ngModel</span><span class="nt">&gt;</span>
</span><span class="line">            <span class="nt">&lt;option</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">&quot;let exchange of exchanges&quot;</span> <span class="err">[</span><span class="na">ngValue</span><span class="err">]=&quot;</span><span class="na">exchange</span><span class="err">&quot;</span><span class="nt">&gt;</span><span class="nt">&lt;/option&gt;</span>
</span><span class="line">          <span class="nt">&lt;/select&gt;</span>
</span><span class="line">        <span class="nt">&lt;/div&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Create<span class="nt">&lt;/button&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;h4&gt;</span>Stock Name is <span class="nt">&lt;/h4&gt;</span>
</span><span class="line"><span class="nt">&lt;h4&gt;</span>Data has been confirmed: <span class="nt">&lt;/h4&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="form-validations">Form Validations</h3>

<ul>
  <li>Angular form validation for template-driven forms relies and extends the <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Constraint_validation">native form validation from HTML</a></li>
  <li>Angular does the work of integrating these <strong>control states</strong> and <strong>validations</strong> with its own internal model (whether it is <code>ngModel</code> or <code>ngForm</code>), and it is up to us to use this internal model to then show the right kind of message to the user.</li>
  <li>There are 2 aspects to this:
    <ul>
      <li><strong>The state</strong> allows us to peek into the state of the form control, on
        <ul>
          <li>whether the user has <em>visited</em> it,</li>
          <li>whether the user has <em>changed</em> it, and finally</li>
          <li>whether it is in a <em>valid state</em>.</li>
        </ul>
      </li>
      <li><strong>The validity</strong>,  tells us whether a form control is valid or not, and if it is not valid, the underlying reason (or reasons) for which the form element is invalid.</li>
    </ul>
  </li>
</ul>

<p><strong>Control State</strong></p>

<ul>
  <li>The <code>ngModel</code> directive changes and adds CSS classes to the element it is on, based on the user’s interaction with it. There are 3 primary modes of interaction that it tracks, and 2 CSS classes per mode of interation associated with it.</li>
  <li>To use these control state classes, we actually don’t need to make any component class code changes. We only need to tweak the CSS a bit and then leverage that in the HTML template for the component.</li>
  <li>Angular’s Form Module is responsible for reading it and applying the form control state classes accordingly, without any other work on our side.</li>
</ul>

<table>
  <thead>
    <tr>
      <th><strong>Control state</strong></th>
      <th><strong>CSS class if True</strong></th>
      <th><strong>CSS class if False</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Visited</td>
      <td><code>ng-touched</code></td>
      <td><code>ng-untouched</code></td>
    </tr>
    <tr>
      <td>Changed</td>
      <td><code>ng-dirty</code></td>
      <td><code>ng-pristine</code></td>
    </tr>
    <tr>
      <td>Valid</td>
      <td><code>ng-valid</code></td>
      <td><code>ng-invalid</code></td>
    </tr>
  </tbody>
</table>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="css"><span class="line"><span class="nc">.stock-name</span> <span class="nc">.ng-valid</span><span class="o">,</span>
</span><span class="line"><span class="nc">.stock-code</span> <span class="nc">.ng-pristine</span><span class="o">,</span>
</span><span class="line"><span class="nc">.stock-price</span> <span class="nc">.ng-untouched</span> <span class="p">{</span>
</span><span class="line">  <span class="k">background-color</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="nc">.stock-name</span> <span class="nc">.ng-invalid</span><span class="o">,</span>
</span><span class="line"><span class="nc">.stock-code</span> <span class="nc">.ng-dirty</span><span class="o">,</span>
</span><span class="line"><span class="nc">.stock-price</span> <span class="nc">.ng-touched</span> <span class="p">{</span>
</span><span class="line">  <span class="k">background-color</span><span class="o">:</span> <span class="nb">pink</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Complete form example</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">createStock</span><span class="err">()&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;div&gt;</span>
</span><span class="line">      The following element changes from green to red when it is invalid
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span> <span class="na">required</span> <span class="na">name=</span><span class="s">&quot;stockName&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div&gt;</span>
</span><span class="line">      The following element changes from green to red when it has been modified
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-code&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Code&quot;</span> <span class="na">name=</span><span class="s">&quot;stockCode&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">code</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div&gt;</span>
</span><span class="line">        The following element changes from green to red when it is visited by the user, regardless of change
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-price&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Price&quot;</span> <span class="na">name=</span><span class="s">&quot;stockPrice&quot;</span> <span class="err">[</span><span class="na">ngModel</span><span class="err">]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">price</span><span class="err">&quot;</span> <span class="err">(</span><span class="na">ngModelChange</span><span class="err">)=&quot;</span><span class="na">setStockPrice</span><span class="err">($</span><span class="na">event</span><span class="err">)&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-exchange&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;div&gt;</span>
</span><span class="line">        <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">&quot;stockExchange&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">exchange</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">          <span class="nt">&lt;option</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">&quot;let exchange of exchanges&quot;</span> <span class="err">[</span><span class="na">ngValue</span><span class="err">]=&quot;</span><span class="na">exchange</span><span class="err">&quot;</span><span class="nt">&gt;</span><span class="nt">&lt;/option&gt;</span>
</span><span class="line">        <span class="nt">&lt;/select&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-confirm&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name=</span><span class="s">&quot;stockConfirm&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">confirmed</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      I confirm that the information provided above is accurate!
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="err">[</span><span class="na">disabled</span><span class="err">]=&quot;!</span><span class="na">confirmed</span><span class="err">&quot;</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Create<span class="nt">&lt;/button&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;h4&gt;</span>Stock Name is <span class="nt">&lt;/h4&gt;</span>
</span><span class="line"><span class="nt">&lt;h4&gt;</span>Data has been confirmed: <span class="nt">&lt;/h4&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>Control Validity</strong></p>

<ul>
  <li>Internally, Angular has its own set of validators.</li>
  <li>Once you add any validators to your form elements, Angular will take care of running them every time any of the form control changes.</li>
  <li>In the example below
    <ul>
      <li>a template reference variable is added at the form level, and at each control level. The form-level template reference variable (<code>stockForm</code>) gets the <code>NgForm</code> model object bound to it, which allows us to check on things like form and control validity and values through it.</li>
      <li>template reference variables (<code>stockName</code>, <code>stockPrice</code>, <code>stockCode</code>) are added on each of the text boxes, and assigned the <code>NgModel</code> model object to it. This allows us to check the form field for all the control states that we were previously using through CSS classes (<em>dirty/pristine</em>, <em>valid/invalid</em>, and <em>touched/untouched</em>), in addition to errors.</li>
      <li>On form submit the <code>stockForm</code> template reference variable is passed, which points to the form model, to the <code>createStock()</code> method. This is another capability of template reference variables: <em>you can pass them in as arguments to your component class</em>.</li>
      <li>Notice that the error message for the stock name is displayed by default, but the error message that the price and code are required is only displayed after we touch the field. This is the advantage of wrapping the error message under the control state (dirty and invalid). Otherwise, the field is invalid by default (because it is empty).</li>
      <li>Note that for the stock price, the minlength and required validators are not shown simultaneously. This is handled by the Angular built-in validators,</li>
    </ul>
  </li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form validation examle</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">createStock</span><span class="err">(</span><span class="na">stockForm</span><span class="err">)&quot;</span> <span class="err">#</span><span class="na">stockForm=</span><span class="s">&quot;ngForm&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span> <span class="na">required</span> <span class="na">name=</span><span class="s">&quot;stockName&quot;</span> <span class="err">#</span><span class="na">stockName=</span><span class="s">&quot;ngModel&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">name</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">&quot;stockName.errors &amp;&amp; stockName.errors.required&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        Stock Name is Mandatory
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-code&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Code&quot;</span> <span class="na">required</span> <span class="na">minlength=</span><span class="s">&quot;2&quot;</span> <span class="na">name=</span><span class="s">&quot;stockCode&quot;</span> <span class="err">#</span><span class="na">stockCode=</span><span class="s">&quot;ngModel&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">code</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">&quot;stockCode.dirty &amp;&amp; stockCode.invalid&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">&quot;stockCode.errors.required&quot;</span><span class="nt">&gt;</span> Stock Code is Mandatory <span class="nt">&lt;/div&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">&quot;stockCode.errors.minlength&quot;</span><span class="nt">&gt;</span> Stock Code must be atleast of length 2 <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-price&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Price&quot;</span> <span class="na">name=</span><span class="s">&quot;stockPrice&quot;</span> <span class="na">required</span> <span class="err">#</span><span class="na">stockPrice=</span><span class="s">&quot;ngModel&quot;</span> <span class="err">[</span><span class="na">ngModel</span><span class="err">]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">price</span><span class="err">&quot;</span> <span class="err">(</span><span class="na">ngModelChange</span><span class="err">)=&quot;</span><span class="na">setStockPrice</span><span class="err">($</span><span class="na">event</span><span class="err">)&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">&quot;stockPrice.dirty &amp;&amp; stockPrice.invalid&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">&quot;stockPrice.errors.required&quot;</span><span class="nt">&gt;</span> Stock Price is Mandatory <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-exchange&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;div&gt;</span>
</span><span class="line">        <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">&quot;stockExchange&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">stock</span><span class="err">.</span><span class="na">exchange</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">          <span class="nt">&lt;option</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">&quot;let exchange of exchanges&quot;</span> <span class="err">[</span><span class="na">ngValue</span><span class="err">]=&quot;</span><span class="na">exchange</span><span class="err">&quot;</span><span class="nt">&gt;</span><span class="nt">&lt;/option&gt;</span>
</span><span class="line">        <span class="nt">&lt;/select&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-confirm&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">name=</span><span class="s">&quot;stockConfirm&quot;</span> <span class="na">required</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">confirmed</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      I confirm that the information provided above is accurate!
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Create<span class="nt">&lt;/button&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;h4&gt;</span>Stock Name is <span class="nt">&lt;/h4&gt;</span>
</span><span class="line"><span class="nt">&lt;h4&gt;</span>Data has been confirmed: <span class="nt">&lt;/h4&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>Template Reference Variable</strong></p>

<ul>
  <li>A template reference variable in Angular allows us to get a temporary handle on a DOM element, component, or directive directly in the template.</li>
  <li>It is denoted by a standard syntax in the HTML, which is a prefix of <code>#</code>. For example, in the following HTML: <code>&lt;input type="text" #myStockField name="stockName"&gt;</code></li>
  <li>The <code>#myStockField</code> is a template reference variable that gives us a reference to the input form field</li>
  <li>When we don’t pass it any value, it will always refer to the HTML DOM element</li>
</ul>

<h2 id="forms---reactive">Forms - Reactive</h2>

<p>Unlike <em>template-driven</em> forms in Angular, with <em>reactive</em> forms, you define the entire tree of Angular form control objects in your component code, and then bind them to native form control elements in your template. Because the component has access to the form controls as well as the backing data model, it can push data model changes into the form control and vice versa, thus reacting to changes either way.</p>

<p><strong>Template-driven vs. Reactive</strong></p>

<ul>
  <li>Both the approaches have their pros and cons.</li>
  <li><em>Template-driven forms</em> are nice and declarative, and easy to understand. Angular is responsible for the data model sync and pushes data to the model and reads and updates values in the UI via directives like <code>ngModel</code>. This also usually means less code in the component class.</li>
  <li><em>Reactive forms</em> are synchronous, and you as a developer have absolute control over how and when the data is synced from the UI to the model and vice versa. Because you create the entire form control tree in the component, you have access to it immediately and don’t have to deal with Angular’s asynchronous life-cycle.</li>
  <li>Another slightly subtle advantage of using <em>reactive forms</em> over <em>template-driven forms</em> is that it forces developers to have a separation between what the user sees and interacts with (what we call the form model), and the persisted data model that drives our application. This is quite common in most applications, where the presented view is different from what the underlying data model is. Reactive forms make that distinction clear, while also keeping you cognizant of the data flow and giving you control over when and what flows from UI to the component and vice versa.</li>
</ul>

<h3 id="form-controls">Form Controls</h3>

<ul>
  <li>The core of any reactive form is the <code>FormControl</code>, which directly represents an individual form element in the template. Thus, any reactive form is nothing but a set of grouped FormControls.</li>
  <li>It is at the <code>FormControl</code> level that we  assign initial values and validators (both sync and async).</li>
  <li>Everything that we did in the template with template-driven forms now happens at a <code>FormControl</code> level in the TypeScript code.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form Controls</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span>
</span><span class="line">             <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span>
</span><span class="line">             <span class="na">name=</span><span class="s">&quot;stockName&quot;</span>
</span><span class="line">             <span class="err">[</span><span class="na">formControl</span><span class="err">]=&quot;</span><span class="na">nameControl</span><span class="err">&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onSubmit</span><span class="err">()&quot;</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;p&gt;</span>Form Control value: <span class="nt">&lt;/p&gt;</span>
</span><span class="line"><span class="nt">&lt;p&gt;</span>Form Control status: <span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>On the <code>onSubmit()</code> call, we simply print the current value of the nameControl control.</li>
  <li>Note that unlike traditional non-MVC frameworks, at no point is the control reaching out into the view to get the current value of the element. We rely on the Form`Control to provide a representative view of the input element, and keep it up to date.</li>
  <li><code>FormControl</code> constructor can also take the initial value along with a list of validators (both sync and async) as arguments.</li>
  <li>it is helpful to think of <code>FormControl</code> when we need to track the <em>state</em> and <em>value</em> of any individual form element, like an input box or a checkbox.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form Controls </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">FormControl</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span class="line">  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-create-stock&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./create-stock.component.html&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./create-stock.component.css&#39;</span><span class="p">]</span>
</span><span class="line"><span class="p">})</span>
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">CreateStockComponent</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">nameControl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">();</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">()</span> <span class="p">{}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">onSubmit() {</span>
</span><span class="line">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Name Control Value&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">nameControl</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="form-groups">Form Groups</h3>

<ul>
  <li>This gives us the convenience of whether we want to track the form controls individually, or as a group.</li>
  <li>switched over from binding to <code>formControl</code> to a <code>formGroup</code></li>
  <li>for each form element, we mention a <code>formControlName</code>. Each of these will bind to an individual element within the <code>formGroup</code>.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form groups</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">stockForm</span><span class="err">&quot;</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">onSubmit</span><span class="err">()&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Name&quot;</span> <span class="na">name=</span><span class="s">&quot;stockName&quot;</span> <span class="na">formControlName=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-code&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Code&quot;</span> <span class="na">formControlName=</span><span class="s">&quot;code&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;stock-price&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Stock Price&quot;</span> <span class="na">formControlName=</span><span class="s">&quot;price&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;p&gt;</span>Form Control value: <span class="nt">&lt;/p&gt;</span>
</span><span class="line"><span class="nt">&lt;p&gt;</span>Form Control status: <span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">CreateStockComponent</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">stockForm</span>: <span class="kt">FormGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormGroup</span><span class="p">({</span>
</span><span class="line">    <span class="nx">name</span>: <span class="kt">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">),</span>
</span><span class="line">    <span class="nx">code</span>: <span class="kt">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mi">2</span><span class="p">)]),</span>
</span><span class="line">    <span class="nx">price</span>: <span class="kt">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
</span><span class="line">  <span class="p">});</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">()</span> <span class="p">{}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">onSubmit() {</span>
</span><span class="line">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Stock Form Value&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stockForm</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="form-builders">Form Builders</h3>

<ul>
  <li><code>FormBuilder</code> fundamentally is syntactic sugar to allow us to quickly create <code>FormGroup</code> and <code>FormControl</code> elements without manually calling new for each one</li>
  <li>For any form with more than a few elements, it almost always makes sense to use the <code>FormBuilder</code> rather than the <code>FormGroup</code> method, as it reduces both the code and makes it a lot more concise and readable.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form builders</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">CreateStockComponent</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">stockForm</span>: <span class="kt">FormGroup</span><span class="p">;</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">fb</span>: <span class="kt">FormBuilder</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">createForm</span><span class="p">();</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">createForm() {</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stockForm</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
</span><span class="line">      <span class="nx">name</span><span class="o">:</span> <span class="p">[</span><span class="kc">null</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
</span><span class="line">      <span class="nx">code</span><span class="o">:</span> <span class="p">[</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mi">2</span><span class="p">)]],</span>
</span><span class="line">      <span class="nx">price</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">0</span><span class="p">)]]</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">onSubmit() {</span>
</span><span class="line">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Stock Form Value&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stockForm</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="form-data">Form Data</h3>

<ul>
  <li>How to set the value back in the form
    <ul>
      <li><code>setValue()</code>
        <ul>
          <li>this method takes a JSON model object that matches the form model exactly. That means for the <code>setValue</code> to work in this case, it needs an object with a <code>name</code>, <code>code</code>, and <code>price</code> key. It should not have more or fewer keys than this, as it would throw an error in this case. Based on the object, the form’s model object values would get updated and these values would be visible in the form in the UI. This is the reason why we delete all other keys from the model object before calling <code>setValue</code>.</li>
        </ul>
      </li>
      <li><code>patchValue()</code>
        <ul>
          <li><code>patchValue</code> is a more forgiving method that takes the fields it has available, and updates the form with them. It will ignore extra fields even if it has fewer fields</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>it is good practice to not directly assign the form model to our data model, but rather make a copy of it.</li>
</ul>

<h3 id="form-arrays">Form Arrays</h3>

<ul>
  <li>to capture multiple values as well as handle nested form elements cleanly</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Form arrays</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">CreateStockComponent</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">stockForm</span>: <span class="kt">FormGroup</span><span class="p">;</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">fb</span>: <span class="kt">FormBuilder</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">createForm</span><span class="p">();</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">createForm() {</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stockForm</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
</span><span class="line">      <span class="nx">name</span><span class="o">:</span> <span class="p">[</span><span class="kc">null</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
</span><span class="line">      <span class="nx">code</span><span class="o">:</span> <span class="p">[</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mi">2</span><span class="p">)]],</span>
</span><span class="line">      <span class="nx">price</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">0</span><span class="p">)]],</span>
</span><span class="line">      <span class="nx">notablePeople</span>: <span class="kt">this.fb.array</span><span class="p">([])</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">get</span> <span class="nx">notablePeople</span><span class="p">()</span><span class="o">:</span> <span class="nx">FormArray</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">stockForm</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;notablePeople&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">FormArray</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">addNotablePerson() {</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">notablePeople</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
</span><span class="line">      <span class="nx">name</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
</span><span class="line">      <span class="nx">title</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">]</span>
</span><span class="line">    <span class="p">}))</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">removeNotablePerson</span><span class="p">(</span><span class="nx">index</span>: <span class="kt">number</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">notablePeople</span><span class="p">.</span><span class="nx">removeAt</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">resetForm() {</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stockForm</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">onSubmit() {</span>
</span><span class="line">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Saving stock&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stock</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">stockForm</span><span class="err">&quot;</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">onSubmit</span><span class="err">()&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="c">&lt;!-- No change until the end of price form element --&gt;</span>
</span><span class="line">    <span class="c">&lt;!-- Omitted for brevity --&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">formArrayName=</span><span class="s">&quot;notablePeople&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">&quot;let person of notablePeople.controls; let i = index&quot;</span> <span class="err">[</span><span class="na">formGroupName</span><span class="err">]=&quot;</span><span class="na">i</span><span class="err">&quot;</span> <span class="na">class=</span><span class="s">&quot;notable-people&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;div&gt;</span> Person  <span class="nt">&lt;/div&gt;</span>
</span><span class="line">        <span class="nt">&lt;div&gt;</span>
</span><span class="line">          <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Person Name&quot;</span> <span class="na">formControlName=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;/div&gt;</span>
</span><span class="line">        <span class="nt">&lt;div&gt;</span>
</span><span class="line">          <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Person Title&quot;</span> <span class="na">formControlName=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;/div&gt;</span>
</span><span class="line">        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">removeNotablePerson</span><span class="err">(</span><span class="na">i</span><span class="err">)&quot;</span><span class="nt">&gt;</span> Remove Person <span class="nt">&lt;/button&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">addNotablePerson</span><span class="err">()&quot;</span><span class="nt">&gt;</span> Add Notable Person <span class="nt">&lt;/button&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
</span><span class="line">    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">resetForm</span><span class="err">()&quot;</span><span class="nt">&gt;</span>
</span><span class="line">      Reset
</span><span class="line">    <span class="nt">&lt;/button&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span><span class="line">
</span><span class="line"><span class="nt">&lt;p&gt;</span>Form Control value: <span class="nt">&lt;/p&gt;</span>
</span><span class="line"><span class="nt">&lt;p&gt;</span>Form Control status: <span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="services">Services</h2>

<ul>
  <li>Services are primarily meant for
    <ul>
      <li>Abstraction of the data-fetching aspects</li>
      <li>Encapsulation of shared application logic</li>
      <li>Sharing of data across components</li>
    </ul>
  </li>
  <li>Services are responsible for the data fetching and common business logic in an Angular application.</li>
  <li>By default, services  are singletons across the application, which allows to store state and access them across various components.</li>
  <li>Another simple way to think about Angular services is that it is the layer to abstract the “how” away from the component, so that the component can just focus on the “what”.</li>
  <li>With the <code>Injectable</code> decorator, Angular will take care of injecting them into our service.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Service Skeleton</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="err">@</span><span class="nx">Injectable</span><span class="p">()</span>
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">StockService</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>We define how the service will be provided and at what level - it could be at <code>AppModule</code> level, <code>AppComponent</code> level or your custom component level.</li>
  <li>Every service that we create needs to be registered as a provider with an injector. Then any other class can ask for the service and the injector will be responsible for providing it.</li>
  <li><strong>Multiple Dependency Injectors</strong>
    <ul>
      <li>Angular supports multiple dependency injectors within the same application.</li>
      <li>The <strong><em>root injector</em></strong> at the root <code>AppModule</code> level is where most services will be registered. This makes the instance available across the entire application.</li>
      <li>In example 1 below, it is registered in the <code>providers</code> section of the <code>NgModule</code>, which means the service is in fact registered with the root injector and the service is a singleton for the entire application, and any class or component in the application can ask for the service and would be handed the very same instance of the service.</li>
      <li>Then, when we made the change to add the providers at the <code>CreateStockComponent</code> level, we brought the injector at the component level into play. Angular will create a chain of injectors all the way down, depending on the need and declarations. And all child components will inherit that injector, which will take precedence over the root injector. When we registered our <code>MessageService</code> provider at the <code>CreateStockComponent</code> level, it created a child injector at that level, with its own instance of the MessageService. What we injected into the <code>CreateStockComponent</code> is in fact this new instance, which has nothing to do with the original root-level <code>MessageService</code>. So we, in fact, have two separate instances of <code>MessageService</code> with nothing in common.</li>
      <li>Just like an Angular application is a tree of components, there is a parallel tree of injectors at play. For most components, these injectors might just be a reference or a proxy to the parent injector. But they may not, as we have just seen.</li>
      <li>Whenever a component asks for a dependency, Angular will check the closest injector in the tree to see whether it can satisfy it. If it can (like in <code>CreateStockComponent</code>), it will provide it. If not, it will check with the parent injector, all the way to the root injector.</li>
    </ul>
  </li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Example 1: Service defined at AppModule</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">StockService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;app/services/stock.service&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
</span><span class="line">  <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span> <span class="nx">AppComponent</span><span class="p">,</span> <span class="nx">StockItemComponent</span><span class="p">,</span> <span class="nx">CreateStockComponent</span><span class="p">,</span> <span class="nx">StockListComponent</span> <span class="p">],</span>
</span><span class="line">  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span> <span class="nx">BrowserModule</span><span class="p">,</span> <span class="nx">FormsModule</span><span class="p">,</span> <span class="nx">HttpModule</span> <span class="p">],</span>
</span><span class="line">  <span class="nx">providers</span><span class="o">:</span> <span class="p">[</span>
</span><span class="line">    <span class="nx">StockService</span> <span class="c1">// &lt;------------service added here</span>
</span><span class="line">  <span class="p">],</span>
</span><span class="line">  <span class="nx">bootstrap</span><span class="o">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
</span><span class="line"><span class="p">})</span>
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Example 2: Service defined at component level</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
</span><span class="line">  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-create-stock&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./create-stock.component.html&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./create-stock.component.css&#39;</span><span class="p">],</span>
</span><span class="line">  <span class="nx">providers</span><span class="o">:</span> <span class="p">[</span><span class="nx">MessageService</span><span class="p">]</span> <span class="c1">// &lt;----------service added as provider</span>
</span><span class="line"><span class="p">})</span>
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">CreateStockComponent</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">stock</span>: <span class="kt">Stock</span><span class="p">;</span>
</span><span class="line">  <span class="kr">public</span> <span class="nx">confirmed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">  <span class="kr">public</span> <span class="nx">exchanges</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NYSE&#39;</span><span class="p">,</span> <span class="s1">&#39;NASDAQ&#39;</span><span class="p">,</span> <span class="s1">&#39;OTHER&#39;</span><span class="p">];</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">stockService</span>: <span class="kt">StockService</span><span class="p">,</span>        <span class="c1">//&lt;----------service injected</span>
</span><span class="line">              <span class="kr">public</span> <span class="nx">messageService</span>: <span class="kt">MessageService</span><span class="p">)</span> <span class="p">{</span>   <span class="c1">//&lt;----------service injected</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stock</span> <span class="o">=</span>  <span class="k">new</span> <span class="nx">Stock</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;NASDAQ&#39;</span><span class="p">);</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">messageService</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s1">&#39;Component Level: Hello Message Service&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<ul>
  <li>We can inject any service we want into our component simply by listing it in our constructor.</li>
  <li>The variable name itself doesn’t matter; Angular uses the type definition to figure out what service to inject.</li>
  <li>By adding the <code>private</code> or <code>public</code> keyword in front of a constructor argument, we can make it a member property of the class with the same name. Which is why we need to access the service through an instance variable and cannot access it directly (i.e., we need to call <code>this.stockService</code>, and cannot directly use <code>stockService</code>). This is a Typescript feature.</li>
</ul>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Service injection example</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">StockListComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">stocks</span>: <span class="kt">Stock</span><span class="p">[];</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">stockService</span>: <span class="kt">StockService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span> <span class="c1">//&lt;-----------service injection in constructor </span>
</span><span class="line">
</span><span class="line">  <span class="nx">ngOnInit() {</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stocks</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stockService</span><span class="p">.</span><span class="nx">getStocks</span><span class="p">();</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="observables">Observables</h2>

<ul>
  <li>For asynchronous operations, <strong><em>callbacks</em></strong> were originally used. Later <strong><em>Promises</em></strong> were introduced in AngularJS which was better than callbacks in many ways. In recent versions, Angular switched to <strong><em>Observables</em></strong></li>
  <li>Observables are a <a href="http://reactivex.io/intro.html">ReactiveX</a> concept that allows us to deal with streams which emit data. Any interested party can then be an observer on this stream, and perform operations and transformations on the events emitted by the stream.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Promises</th>
      <th>Observables</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>operate on a single asynchronous event</td>
      <td>allow us to deal with a stream of zero or more async events</td>
    </tr>
    <tr>
      <td>a promise’s success or error handler will eventually be called, even if you are no longer interested in it</td>
      <td>observables allow us to cancel a subscription and not process data if we don’t care about it.</td>
    </tr>
    <tr>
      <td>good for single event cases, and are still an option when you work with Angular.</td>
      <td>An observable can be converted into a promise and then handled in Angular. But it is recommended to use observables, as Angular provides a lot of out-of-the-box support for RxJS and its extensions within its framework.</td>
    </tr>
    <tr>
      <td>not possible to create a chain of transformations</td>
      <td>Observables allow us to compose and create a chain of transformations easily. The operators it provides out of the box allow for some strong and powerful compositions, and operations like retry and replay make handling some common use cases trivial. All of this while being able to reuse our subscription code.</td>
    </tr>
  </tbody>
</table>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>stock.service.ts</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs/Observable&#39;</span><span class="p">;</span> <span class="c1">//&lt;------- RxJS as a library is large, so import only what is needed</span>
</span><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">_throw</span> <span class="kr">as</span> <span class="nx">ObservableThrow</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs/observable/throw&#39;</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">of</span> <span class="kr">as</span> <span class="nx">ObservableOf</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs/observable/of&#39;</span><span class="p">;</span>
</span><span class="line"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Stock</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;app/model/stock&#39;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="err">@</span><span class="nx">Injectable</span><span class="p">()</span>
</span><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">StockService</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">private</span> <span class="nx">stocks</span>: <span class="kt">Stock</span><span class="p">[];</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stocks</span> <span class="o">=</span> <span class="p">[</span>
</span><span class="line">      <span class="k">new</span> <span class="nx">Stock</span><span class="p">(</span><span class="s1">&#39;Test Stock Company&#39;</span><span class="p">,</span> <span class="s1">&#39;TSC&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;NASDAQ&#39;</span><span class="p">),</span>
</span><span class="line">      <span class="k">new</span> <span class="nx">Stock</span><span class="p">(</span><span class="s1">&#39;Second Stock Company&#39;</span><span class="p">,</span> <span class="s1">&#39;SSC&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;NSE&#39;</span><span class="p">),</span>
</span><span class="line">      <span class="k">new</span> <span class="nx">Stock</span><span class="p">(</span><span class="s1">&#39;Last Stock Company&#39;</span><span class="p">,</span> <span class="s1">&#39;LSC&#39;</span><span class="p">,</span> <span class="mi">876</span><span class="p">,</span> <span class="mi">765</span><span class="p">,</span> <span class="s1">&#39;NYSE&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="p">];</span>
</span><span class="line">   <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">getStocks</span><span class="p">()</span> <span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Stock</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span> <span class="c1">//&lt;---------return observable instead of synchronous value</span>
</span><span class="line">    <span class="k">return</span> <span class="nx">ObservableOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stocks</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">createStock</span><span class="p">(</span><span class="nx">stock</span>: <span class="kt">Stock</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span> <span class="c1">//&lt;---------return observable instead of synchronous value</span>
</span><span class="line">    <span class="kd">let</span> <span class="nx">foundStock</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stocks</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">each</span> <span class="o">=&gt;</span> <span class="nx">each</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="nx">stock</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="nx">foundStock</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="k">return</span> <span class="nx">ObservableThrow</span><span class="p">({</span><span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;Stock with code &#39;</span> <span class="o">+</span> <span class="nx">stock</span><span class="p">.</span><span class="nx">code</span> <span class="o">+</span> <span class="s1">&#39; already exists&#39;</span><span class="p">});</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stocks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">stock</span><span class="p">);</span>
</span><span class="line">    <span class="k">return</span> <span class="nx">ObservableOf</span><span class="p">({</span><span class="nx">msg</span><span class="o">:</span> <span class="s1">&#39;Stock with code &#39;</span> <span class="o">+</span> <span class="nx">stock</span><span class="p">.</span><span class="nx">code</span> <span class="o">+</span> <span class="s1">&#39; successfully created&#39;</span><span class="p">});;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">toggleFavorite</span><span class="p">(</span><span class="nx">stock</span>: <span class="kt">Stock</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Stock</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class="line">    <span class="kd">let</span> <span class="nx">foundStock</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stocks</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">each</span> <span class="o">=&gt;</span> <span class="nx">each</span><span class="p">.</span><span class="nx">code</span> <span class="o">===</span> <span class="nx">stock</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
</span><span class="line">    <span class="nx">foundStock</span><span class="p">.</span><span class="nx">favorite</span> <span class="o">=</span> <span class="o">!</span><span class="nx">foundStock</span><span class="p">.</span><span class="nx">favorite</span><span class="p">;</span>
</span><span class="line">    <span class="k">return</span> <span class="nx">ObservableOf</span><span class="p">(</span><span class="nx">foundStock</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>stock-list.component.ts</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">StockListComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">stocks</span>: <span class="kt">Stock</span><span class="p">[];</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">stockService</span>: <span class="kt">StockService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">ngOnInit() {</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stockService</span><span class="p">.</span><span class="nx">getStocks</span><span class="p">()</span>
</span><span class="line">        <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">stocks</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">          <span class="k">this</span><span class="p">.</span><span class="nx">stocks</span> <span class="o">=</span> <span class="nx">stocks</span><span class="p">;</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">onToggleFavorite</span><span class="p">(</span><span class="nx">stock</span>: <span class="kt">Stock</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stockService</span><span class="p">.</span><span class="nx">toggleFavorite</span><span class="p">(</span><span class="nx">stock</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>In a lot of cases, we simply want to make a call to our server, and display the return value in our UI. We don’t need to process the data, make any transformations, or anything else. In those cases, Angular gives us a slight shortcut that we can use.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Simplified version of stock-list.component.ts</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">StockListComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="kr">public</span> <span class="nx">stocks$</span>: <span class="kt">Observable</span><span class="o">&lt;</span><span class="nx">Stock</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">//&lt;--------- storing the observable as a member variable</span>
</span><span class="line">  <span class="kr">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">stockService</span>: <span class="kt">StockService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">ngOnInit() {</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stocks$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stockService</span><span class="p">.</span><span class="nx">getStocks</span><span class="p">();</span>  <span class="c1">//&lt;--------- directly saving the observable returned by API, instead of its underlying return value</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nx">onToggleFavorite</span><span class="p">(</span><span class="nx">stock</span>: <span class="kt">Stock</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">this</span><span class="p">.</span><span class="nx">stockService</span><span class="p">.</span><span class="nx">toggleFavorite</span><span class="p">(</span><span class="nx">stock</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We use a <code>Pipe</code> in the <code>ngFor</code> expression. Angular provides a pipe called <code>async</code>, which allows us to bind to <code>Observable</code>. Angular would then be responsible for waiting for events to be emitted on the observable and displaying the resultant value directly. It saves us that one step of having to manually subscribe to the observable.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>stock-list.component.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;app-stock-item</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">&quot;let stock of stocks$ | async&quot;</span>
</span><span class="line">                <span class="err">[</span><span class="na">stock</span><span class="err">]=&quot;</span><span class="na">stock</span><span class="err">&quot;</span>
</span><span class="line">                <span class="err">(</span><span class="na">toggleFavorite</span><span class="err">)=&quot;</span><span class="na">onToggleFavorite</span><span class="err">($</span><span class="na">event</span><span class="err">)&quot;</span><span class="nt">&gt;</span>
</span><span class="line"><span class="nt">&lt;/app-stock-item&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>create-stock.component.ts</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="ts"><span class="line"><span class="kr">export</span> <span class="kr">class</span> <span class="nx">CreateStockComponent</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="nx">createStock</span><span class="p">(</span><span class="nx">stockForm</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="nx">stockForm</span><span class="p">.</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="k">this</span><span class="p">.</span><span class="nx">stockService</span><span class="p">.</span><span class="nx">createStock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stock</span><span class="p">)</span>
</span><span class="line">          <span class="p">.</span><span class="nx">subscribe</span><span class="p">((</span><span class="nx">result</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">            <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">msg</span><span class="p">;</span>
</span><span class="line">            <span class="k">this</span><span class="p">.</span><span class="nx">stock</span> <span class="o">=</span>  <span class="k">new</span> <span class="nx">Stock</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;NASDAQ&#39;</span><span class="p">);</span>
</span><span class="line">          <span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">//&lt;-------exception handling</span>
</span><span class="line">            <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">msg</span><span class="p">;</span>
</span><span class="line">          <span class="p">});</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Stock form is in an invalid state&#39;</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h1 id="tools">Tools</h1>

<ul>
  <li>build - webpack, npm, ?</li>
  <li>testing - karma, jasmine, protractor, ??</li>
  <li>debug - augury</li>
  <li>stylesheets - css, scss, sass, stylus</li>
  <li>state management - ???</li>
</ul>

<h1 id="questions">Questions</h1>

<ul>
  <li>diff b/w unit test and e2e test?</li>
  <li>Typescript - decorators</li>
</ul>

<h1 id="references">References</h1>

<ul>
  <li>Books
    <ul>
      <li>O’Reilly - Angular Up and Running - Shyam Seshadri - 2018</li>
    </ul>
  </li>
</ul>

  
    <footer>
      
      
        <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://fizalihsan.github.io/technology/angular.html" data-via="fizalihsan" data-counturl="http://fizalihsan.github.io/technology/angular.html" >Tweet</a>
  
  
  
</div>

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>

	<br/><br/>
	<ul>
		<h2>Technical</h2>

		<li>
			<h3>Architecture</h3>
			<a href="/technology/architecture.html">Overview</a>  |  
			<a href="/technology/coding-principles.html">Coding Principles</a> |	
			<a href="/technology/ddd.html">DDD</a>  |  
			<a href="/technology/design-principles.html">Design Principles</a>  |
			<a href="/technology/eventsourcing.html">Event Sourcing</a> |  
			<a href="/technology/lambda-architecture.html">Lambda Architecture</a>  |  
			<a href="/technology/observability.html">Observability</a>  |  
			<a href="/technology/patterns.html">Patterns</a>  |  
			<a href="/technology/sdlc.html">SDLC</a> |  
			<a href="/technology/scalability.html">Scalability</a>  |  
			<a href="/technology/security.html">Security</a>  |  
			<a href="/technology/transaction.html">Transactions</a>
		</li>

		<li>
			<h3>BigData</h3>
			<a href="/technology/bigdata.html">Concepts</a>  |  
			<a href="/technology/distributedcomputing.html">Distributed Computing</a>  |  
			<a href="/technology/elasticsearch.html">ElasticSearch</a>  |  
			<a href="/technology/bigdata-frameworks.html">Frameworks</a>  |  
			<a href="/technology/hadoop-ecosystem.html">Hadoop Ecosystem</a>  |  
			<a href="/technology/nosql.html">NoSQL</a>  |  
			<a href="/technology/concurrency-parallelism.html">Parallel Computing</a>
		</li>

		<li>
			<h3>Cloud Computing</h3>
			<a href="/technology/cloud-computing.html">Concepts</a>  |  
			<a href="/technology/aws.html">AWS</a>  |  
			<a href="/technology/infrastructure-as-code.html">Infrastructure as Code</a>  |  
			<a href="/technology/virtualization.html">Virtualization</a>
		</li>

		<li>
			<h3>Database</h3>
			<a href="/technology/rdbms.html">Concepts</a>  |  
			<a href="/technology/db-design.html">Design</a>  |  
			<a href="/technology/db-performance.html">Performance</a>  |  
			<a href="/technology/sql.html">SQL</a>
		</li>

		<li>
			<h3>Functional Programming</h3>
			<a href="/technology/functionalprogramming.html">Concepts</a>
		</li>

		<li>
			<h3>Java</h3>
			<a href="/technology/java.html">Core Concepts</a>  |  
			<a href="/technology/java-collections.html">Collections</a>  |  
			<a href="/technology/java-concurrency.html">Concurrency</a>  |  
			<a href="/technology/java-database.html">Database</a>  |  
			<a href="/technology/java-jmx.html">JMX</a>  |  
			<a href="/technology/java-jndi.html">JNDI</a>  |  
			<a href="/technology/java-io.html">I/O</a>  |  
			<a href="/technology/java-performance.html">Performance</a>  |  
			<a href="/technology/java-testing.html">Testing</a>  |  
			<a href="/technology/java-web.html">Web</a>  |  
			<a href="/technology/java-newsletters.html">Java Specialist Newsletters</a>
		</li>

		<li>
			<h3>Languages</h3>
			<a href="/technology/groovy.html">Groovy</a>  |  
			<a href="/technology/python.html">Python</a>  |  
			<a href="/technology/scala.html">Scala</a>
		</li>

		<li>
			<h3>SOA</h3>
			<a href="/technology/soa.html">Concepts</a>  |  
			<a href="/technology/camel.html">Camel</a>  |  
			<a href="/technology/graphql.html">GraphQL</a>  |  
			<a href="/technology/messaging.html">Messaging</a> |  
			<a href="/technology/microservices.html">Microservices</a>   |  
			<a href="/technology/rest-services.html">REST</a>  | 
			<a href="/technology/soap-services.html">SOAP</a>  |  
			<a href="/technology/webservices.html">Web Services</a> |  
			<a href="/technology/xml.html">XML</a>
		</li>

		<li>
			<h3>Spring</h3>
			<a href="/technology/spring-batch.html">Batch</a>  |  
			<a href="/technology/spring.html">Core</a>  |  
			<a href="/technology/spring-mvc.html">MVC</a>
		</li>

		<li>
			<h3>Web</h3>
			<a href="/technology/webconcepts.html">Concepts</a> |
			<a href="/technology/webanalytics.html">Analytics</a> |
			<a href="/technology/angular.html">Angular</a> | 
			<a href="/technology/webapp_architecture.html">Architecture</a> | 
			<a href="/technology/js-ecosystem.html">JS Ecosystem</a> |
			<a href="/technology/web_security.html">Security</a> |
			<a href="/technology/ux.html">UX</a>
		</li>

		<li>
			<h3>General Concepts</h3>
			<a href="/technology/algorithms.html">Algorithms</a>  |  
			<a href="/softskills/brain-teasers.html">Brain Teasers</a>  |  
			<a href="/technology/datastructures.html">Data Structures</a>  |  
			<a href="/technology/design-faqs.html">Design FAQs</a>  |  
			<a href="/technology/networking.html">Networking</a>  |  
			<a href="/technology/oops.html">OOPS</a>  |  
			<a href="/technology/os.html">Operating Systems</a>  |  
			<a href="/technology/vcs.html">VCS</a>
		</li>

		<h2>Non-Techninal</h2>

		<li>
			<h3>Domain Knowledge</h3>
			<a href="/domain/retirement.html">Retirement</a>
		</li>

		<li>
			<h3>Soft Skills</h3>
			<a href="/softskills/presentation.html">Presentation</a>  |  
			<a href="/softskills/productivity.html">Productivity</a>  |  
			<a href="/softskills/written.html">Written Communication</a>
		</li>
	</ul>

  <!-- <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
  </ul> &#8211;>
  <!-- <ul>
    <li><a href="/datascience/statistics.html">Statistics</a></li>
    <li><a href="/datascience/r.html">R Programming</a></li>
  </ul> &#8211;>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/fizalihsan">@fizalihsan</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'fizalihsan',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2020 - Mohamed Fizal Ihsan Mohamed -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
